//! push-state-tree - v0.15.0 - 2024-03-26
//* https://github.com/gartz/pushStateTree/
//* Copyright (c) 2024 Gabriel Reitz Giannattasio <g@rtz.sh>; Licensed 

var PushStateTree = {options: {VERSION: '0.15.0'}};
var PushStateTree={options:{VERSION:"0.15.0"}};!function(l){"use strict";var t,i,h=l.document,e=l.window,p=l.location,d=0<=e.navigator.userAgent.indexOf("Trident"),f=(l.location.origin||(l.location.origin=l.location.protocol+"//"+l.location.host),Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");function t(){var t=e;return this instanceof r&&e&&(t=this),i.apply(t,n.concat(Array.prototype.slice.call(arguments)))}var n=Array.prototype.slice.call(arguments,1),i=this,r=function(){};return r.prototype=this.prototype,t.prototype=new r,t}),l.HashChangeEvent),n=l.Event;if(Element.prototype.addEventListener){r.prototype=n.prototype,l.CustomEvent&&!d||(l.CustomEvent=r),(!f||l.opera&&l.opera.version()<15||d)&&(f=l.CustomEvent),d&&(n=r);try{new f("hashchange")}catch(t){f=r}try{new n("popstate")}catch(t){n=r}}function r(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=h.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}!Element.prototype.addEventListener&&Object.defineProperty&&(t=h.createEventObject().constructor.prototype,Object.defineProperty(t,"target",{get:function(){return this.srcElement}}),t=function(t,e){this.__bindedFunctions||(this.__bindedFunctions=[]);var n=e;if(!("on"+t in this)||"hashchange"===t){this.__elemetIEid=this.__elemetIEid||"__ie__"+Math.random();var i=t+this.__elemetIEid,r=this,e=function(t){t.propertyName===i&&n.call(r,h.documentElement[i])};if(this.__bindedFunctions.push({original:n,binded:e}),h.documentElement.attachEvent("onpropertychange",e),"hashchange"!==t)return}e=n.bind(this);this.__bindedFunctions.push({original:n,binded:e}),this.attachEvent("on"+t,e)},HTMLDocument.prototype.addEventListener=t,Element.prototype.addEventListener=t,e.addEventListener=t,t=function(t,e){this.__bindedFunctions||(this.__bindedFunctions=[]);var n,i=e;if(!("on"+t in this)||"hashchange"===t){for(var r=0;r<this.__bindedFunctions.length;r++)this.__bindedFunctions[r].original===i&&(n=this.__bindedFunctions[r].binded,this.__bindedFunctions=this.__bindedFunctions.splice(r,1),r=this.__bindedFunctions.length);if(n&&h.documentElement.detachEvent("onpropertychange",n),"hashchange"!==t)return}for(var o=0;o<this.__bindedFunctions.length;o++)this.__bindedFunctions[o].original===i&&(n=this.__bindedFunctions[o].binded,this.__bindedFunctions=this.__bindedFunctions.splice(o,1),o=this.__bindedFunctions.length);n&&this.detachEvent("on"+t,n)},HTMLDocument.prototype.removeEventListener=t,Element.prototype.removeEventListener=t,e.removeEventListener=t,CustomEvent=n=function(t,e){var n=h.createEventObject();return e=e||{},n.type=t,n.detail=e.detail,"on"+t in l&&"hashchange"!==t||(n.name=t,n.customEvent=!0),n},f=CustomEvent,t=function(t){var e;t.customEvent?this.__elemetIEid&&(e=t.name+this.__elemetIEid,h.documentElement[e]=t):this.fireEvent(t.type,t)},HTMLDocument.prototype.dispatchEvent=t,Element.prototype.dispatchEvent=t,e.dispatchEvent=t),"forEach"in Array.prototype||(i=Array.prototype.slice,Array.prototype.slice=function(){for(var t=[],e=0,n=this.length;e<n;e++)e in this&&t.push(this[e]);return i.apply(t,arguments)}),"forEach"in Array.prototype||(Array.prototype.forEach=function(t,e){for(var n=0;n<this.length;n++)n in this&&t.call(e,this[n],n)}),"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Array.prototype.filter||(Array.prototype.filter=function(t){if(null==this)throw new TypeError;var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError;for(var i,r=[],o=2<=arguments.length?arguments[1]:void 0,a=0;a<n;a++)a in e&&(i=e[a],t.call(o,i,a,e))&&r.push(i);return r});var y="usePushState",v="hasPushState",b="hashchange",g="popstate",E="leave",m="update",_="enter",P="change",w="match",S="oldMatch",e=l.PushStateTree&&l.PushStateTree.options||{},o=l.DEBUG||e.DEBUG,L=e.VERSION||"development";function a(t){return!isNaN(parseFloat(t))&&t%1==0&&isFinite(t)}function O(t,e,n){Object.defineProperty(t,e,{get:function(){return n},set:function(){}})}function s(t){return/^[a-z0-9]+:\/\//i.test(t)}function c(t){return/^[^#/]/.test(t)}function u(t){for(var e=t.split("/"),n=1;n<e.length;)".."===e[n]&&0<n&&".."!==e[n-1]&&(e.splice(n-1,2),n-=2),n++;return e.join("/").replace(/\/\.\/|\.\/|\.\.\//g,"/").replace(/^\/$/,"")}var A="undefined"!=typeof HTMLElement?HTMLElement:Element;function F(t){if((t=t||{})[y]=!1!==t[y],!(this instanceof A))return F.apply(h.createElement("pushstatetree-route"),arguments);var e,n,i,r,o=this;for(e in this.VERSION=L,t)t.hasOwnProperty(e)&&(o[e]=t[e]);for(r in F.prototype[v]?(n=t[y],Object.defineProperty(o,y,{get:function(){return n},set:function(t){n=!1!==t}})):O(o,y,!1),Object.defineProperty(o,"beautifyLocation",{get:function(){return F.prototype.beautifyLocation&&n},set:function(t){F.prototype.beautifyLocation=!0===t}}),o.beautifyLocation=t.beautifyLocation&&o.usePushState,Object.defineProperty(o,"basePath",{get:function(){return i},set:function(t){"/"!==(i=t||"")[0]&&(i="/"+i)}}),o.basePath=t.basePath,F.prototype)F.prototype.hasOwnProperty(r)&&!function(e){"function"==typeof F.prototype[e]?o[e]=function(){return F.prototype[e].apply(this,arguments)}:void 0===o[e]&&Object.defineProperty(o,e,{get:function(){return F.prototype[e]},set:function(t){F.prototype[e]=t}})}(r);O(o,"length",l.history.length),O(o,"state",l.history.state);function a(){l.dispatchEvent(new f(b))}var s={url:"",uri:""},c=(Object.defineProperty(o,"uri",{get:function(){var t,e;return s.url===l.location.href?s.uri:(l.location.hash.length||"#"===l.location.href[p.href.length-1]?(t=l.location.hash.match(/^(#*)?(.*\/?)/)[2],e=o[y],o.beautifyLocation&&o.isPathValid&&e&&o.replaceState(o.state,o.title,"/"===t[0]?t:"/"+t)):(t=l.location.pathname+l.location.search,this.isPathValid&&(t=t.slice(this.basePath.length))),t=t.replace(/^[\/]+/,""),o.getAttribute("uri")!==t&&o.setAttribute("uri",t),s.url=l.location.href,s.uri=t)},configurable:!0}),Object.defineProperty(o,"isPathValid",{get:function(){var t=l.location.pathname+l.location.search;return!this.basePath||0===t.indexOf(this.basePath)}}),o.eventStack={leave:[],change:[],enter:[],match:[]},l.addEventListener(g,function(){var t=o.uri,e=o.state;o.rulesDispatcher(),I=t,R&&this.dispatch()}.bind(o)),!1),u=function(){var t,e;c||I!==o.uri&&(t=o.uri,e=o.state,o.rulesDispatcher(),I=t,R)&&this.dispatch()}.bind(o);o.avoidHashchangeHandler=function(){l.removeEventListener(b,u),c=!0},l.addEventListener(b,u);return h.addEventListener("DOMContentLoaded",a),l.addEventListener("readystatechange",a),l.addEventListener("load",function(){a(),d&&l.setInterval(function(){o.uri!==I?a():c&&(c=!1,I=o.uri,l.addEventListener(b,u))}.bind(o),50)}.bind(o)),this}var j,I=null,T=[],R=!1,C=!1;function H(t){var n=t;this[t]=function(){var t,e=Array.prototype.slice.call(arguments);return"pushState"!==n&&"replaceState"!==n||s(e[2])||(c(e[2])?(t=(t=this.uri.match(/^([^?#]*)\//))?t[1]+"/":"",e[2]=t+e[2]):e[2]=e[2].match(/^([#/]*)?(.*)/)[2],this[y]?e[2]=this.basePath+e[2]:e[2]=p.pathname+"#"+u(e[2])),l.history[n].apply(l.history,e),this}}for(j in F.prototype={beautifyLocation:!0,createRule:function(t){var e,n=h.createElement("pushstatetree-rule"),i=new RegExp("");for(e in Object.defineProperty(n,"rule",{get:function(){return i},set:function(t){if(t instanceof RegExp)i=t;else{if(t===i.toString())return;t=(t+"").match(/^\/(.+)\/([gmi]*)|(.*)/);i=new RegExp(t[1]||t[3],t[2])}n.setAttribute("rule",i.toString())}}),Object.defineProperty(n,"parentGroup",{get:function(){var t=n.getAttribute("parent-group");return t&&a(t)?+t:null},set:function(t){a(t)?n.setAttribute("parent-group",t):n.removeAttribute("parent-group")}}),t)t.hasOwnProperty(e)&&(n[e]=t[e]);var r=[],o=(Object.defineProperty(n,w,{get:function(){return r},set:function(t){r=t instanceof Array?t:[]}}),[]);return Object.defineProperty(n,S,{get:function(){return o},set:function(t){o=t instanceof Array?t:[]}}),n[w]=[],n[S]=[],["assign","navigate","replace","dispatch","pushState","replaceState"].forEach(function(t){n[t]=function(){this.parentElement[t].apply(this.parentElement,arguments)}}),n},add:function(t){return this.appendChild(this.createRule(t)),this},remove:function(t){var e=t;if((e="string"==typeof t?this.querySelector(t):e)&&e.parentElement)return e.parentElement.removeChild(e),e},dispatch:function(){return C?R=!0:(R=!1,l.dispatchEvent(new n(g))),this},assign:function(t){return this.pushState(null,null,t).dispatch()},replace:function(t){return this.replaceState(null,null,t).dispatch()},navigate:function(){this.assign.apply(this,arguments)},rulesDispatcher:function(){var h=!0===this.debug||o;if(this.isPathValid&&(T.push(function(t,e){return Array.prototype.slice.call(this.children||this.childNodes).forEach(p.bind(this,t,e)),t}.bind(this,this.uri)),!(1<T.length))){for(var t=I;0<T.length;)t=T[0].call(null,t),T.shift();C=!0;var i=this.eventStack;[P,_,w].forEach(function(t){for(;0<i[t].length;){for(var e=i[t][0].events,n=i[t][0].element;0<e.length;)n.dispatchEvent(e[0]),e.shift();i[t].shift()}}),C=!1}function p(t,e,n){if(n.rule){var i=t,r=e,o=("number"==typeof n.parentGroup&&(i="",(s=n.parentElement)[w].length>n.parentGroup&&(i=s[w][n.parentGroup]||""),r="",s[S].length>n.parentGroup)&&(r=s[S][n.parentGroup]||""),n[w]=i[w](n.rule),n[S]="string"==typeof r?r[w](n.rule):[],n[w]),a=n[S],s=Array.prototype.slice.call(n.children);if(0===o.length)return 0===a.length||n.routerURI!==e?void 0:(n.uri=null,n.removeAttribute("uri"),s.forEach(p.bind(this,t,e)),n.dispatchEvent(new u(m,{detail:{type:E}})),void n.dispatchEvent(new u(E)));this.eventStack[w].push({element:n,events:[new u(w)]});var c=n.routerURI!==e;n.routerURI=this.uri,n.uri=o[0],n.setAttribute("uri",o[0]),0===a.length||c?this.eventStack[_].push({element:n,events:[new u(m,{detail:{type:_}}),new u(_)]}):o[0]!==a[0]&&this.eventStack[P].push({element:n,events:[new u(m,{detail:{type:P}}),new u(P)]}),s.forEach(p.bind(this,t,e))}function u(t,e){return(e=e||{}).detail=e.detail||{},e.detail[w]=o||[],e.detail[S]=a||[],e.cancelable=!0,h&&"object"==typeof console&&(console.log({name:t,ruleElement:n,params:e,useURI:i,useOldURI:r}),console.trace)&&console.trace(),new l.CustomEvent(t,e)}}}},l.history)"function"==typeof l.history[j]&&H.call(F.prototype,j);F.prototype[v]=l.history&&!!l.history.pushState,F.prototype[v]||(F.prototype[y]=!1);var D=null;F.prototype.pushState||(F.prototype.pushState=function(t,e,n){var i=h.title||"";return n=n||"",null!==D&&(h.title=D),this.avoidHashchangeHandler(),s(n)&&(l.location.href=n),c(n="#"===n[0]?n.slice(1):n)&&(n=u(n=l.location.hash.slice(1,l.location.hash.lastIndexOf("/")+1)+n)),l.location.hash=n,h.title=i,D=e,this}),F.prototype.replaceState||(F.prototype.replaceState=function(t,e,n){var i,r=h.title||"";if(n=n||"",null!==D&&(h.title=D),this.avoidHashchangeHandler(),s(n))throw new Error("Invalid url replace.");return c(n="#"===n[0]?n.slice(1):n)&&(i=l.location.hash.lastIndexOf("/")+1,n=u(n=l.location.hash.slice(1,i)+n)),l.location.replace(n="#"+n),h.title=r,D=e,this}),l.PushStateTree=F,"undefined"!=typeof module&&(module.exports=F)}(function(){"use strict";return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:void 0}());